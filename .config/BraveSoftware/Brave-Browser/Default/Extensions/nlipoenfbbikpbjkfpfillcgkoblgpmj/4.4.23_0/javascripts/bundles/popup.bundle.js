(()=>{"use strict";var e,t={51227:(e,t,r)=>{function o(){o=function(){return t};var e,t={},r=Object.prototype,n=r.hasOwnProperty,a=Object.defineProperty||function(e,t,r){e[t]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",l=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function d(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{d({},"")}catch(e){d=function(e,t,r){return e[t]=r}}function f(e,t,r,o){var n=t&&t.prototype instanceof y?t:y,i=Object.create(n.prototype),c=new j(o||[]);return a(i,"_invoke",{value:C(e,r,c)}),i}function h(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=f;var p="suspendedStart",m="suspendedYield",v="executing",g="completed",w={};function y(){}function b(){}function $(){}var k={};d(k,s,(function(){return this}));var x=Object.getPrototypeOf,_=x&&x(x(N([])));_&&_!==r&&n.call(_,s)&&(k=_);var S=$.prototype=y.prototype=Object.create(k);function I(e){["next","throw","return"].forEach((function(t){d(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(o,a,i,s){var l=h(e[o],e,a);if("throw"!==l.type){var u=l.arg,d=u.value;return d&&"object"==c(d)&&n.call(d,"__await")?t.resolve(d.__await).then((function(e){r("next",e,i,s)}),(function(e){r("throw",e,i,s)})):t.resolve(d).then((function(e){u.value=e,i(u)}),(function(e){return r("throw",e,i,s)}))}s(l.arg)}var o;a(this,"_invoke",{value:function(e,n){function a(){return new t((function(t,o){r(e,n,t,o)}))}return o=o?o.then(a,a):a()}})}function C(t,r,o){var n=p;return function(a,i){if(n===v)throw Error("Generator is already running");if(n===g){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var c=o.delegate;if(c){var s=E(c,o);if(s){if(s===w)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===p)throw n=g,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=v;var l=h(t,r,o);if("normal"===l.type){if(n=o.done?g:m,l.arg===w)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=g,o.method="throw",o.arg=l.arg)}}}function E(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),w;var a=h(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,w;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,w):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,w)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function r(){for(;++o<t.length;)if(n.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(c(t)+" is not iterable")}return b.prototype=$,a(S,"constructor",{value:$,configurable:!0}),a($,"constructor",{value:b,configurable:!0}),b.displayName=d($,u,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===b||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,$):(e.__proto__=$,d(e,u,"GeneratorFunction")),e.prototype=Object.create(S),e},t.awrap=function(e){return{__await:e}},I(L.prototype),d(L.prototype,l,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new L(f(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(S),d(S,u,"Generator"),d(S,s,(function(){return this})),d(S,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&n.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function o(o,n){return c.type="throw",c.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var s=n.call(i,"catchLoc"),l=n.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,w):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),w},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),w}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:N(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),w}},t}function n(e,t,r,o,n,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(o,n)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(o,a){var i=e.apply(t,r);function c(e){n(i,o,a,c,s,"next",e)}function s(e){n(i,o,a,c,s,"throw",e)}c(void 0)}))}}function i(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=c(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=c(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==c(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function s(e,t){return new Promise((function(r,o){var n=null;if("object"===c(e))n=e;else{if("string"!=typeof e)throw"TypeError: First argument should be a string or an object.";n=i({},e,t)}chrome.storage.local.set(n,(function(){return chrome.runtime.lastError?o(chrome.runtime.lastError):r()}))}))}function l(e){return new Promise((function(t,r){"string"==typeof e?chrome.storage.local.get([e],(function(r){t(r[e])})):Array.isArray(e)?chrome.storage.local.get(null,(function(r){t(e.map((function(e){return r[e]})))})):e||chrome.storage.local.get(null,(function(e){t(e)}))}))}function u(e){return d.apply(this,arguments)}function d(){return(d=a(o().mark((function e(t){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){chrome.storage.local.get("options",(function(r){e(t?r.options[t]:r.options)}))})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return h.apply(this,arguments)}function h(){return(h=a(o().mark((function e(){var t,r,n,a,i;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=!1,!localStorage||!localStorage.msObj){e.next=37;break}return e.next=5,u();case 5:r=e.sent,localStorage.format&&(r.format=localStorage.format,localStorage.removeItem("format"),t=!0),localStorage.msObj&&(r.msObj=JSON.parse(localStorage.msObj),localStorage.removeItem("msObj"),t=!0),localStorage.delay_sec&&(n=parseInt(localStorage.delay_sec),isNaN(n)||(r.delay_sec=n),localStorage.removeItem("delay_sec"),t=!0),localStorage.desktop_delay_sec&&(a=parseInt(localStorage.desktop_delay_sec),isNaN(a)||(r.desktop_delay_sec=a),localStorage.removeItem("desktop_delay_sec"),t=!0),localStorage["add-url"]&&(r["add-url"]="true"===localStorage["add-url"],localStorage.removeItem("add-url"),t=!0),localStorage["expand-link"]&&(r["expand-link"]="true"===localStorage["expand-link"],localStorage.removeItem("expand-link"),t=!0),localStorage["expand-link-slack"]&&(r["expand-link-slack"]="true"===localStorage["expand-link-slack"],localStorage.removeItem("expand-link-slack"),t=!0),localStorage["expand-link-trello"]&&(r["expand-link-trello"]="true"===localStorage["expand-link-trello"],localStorage.removeItem("expand-link-trello"),t=!0),localStorage["expand-link-asana"]&&(r["expand-link-asana"]="true"===localStorage["expand-link-asana"],localStorage.removeItem("expand-link-asana"),t=!0),localStorage["expand-link-github"]&&(r["expand-link-github"]="true"===localStorage["expand-link-github"],localStorage.removeItem("expand-link-github"),t=!0),localStorage["expand-link-jira"]&&(r["expand-link-jira"]="true"===localStorage["expand-link-jira"],localStorage.removeItem("expand-link-jira"),t=!0),localStorage["expand-link-gmail"]&&(r["expand-link-gmail"]="true"===localStorage["expand-link-gmail"],localStorage.removeItem("expand-link-gmail"),t=!0),localStorage["auto-save-path"]&&(r["auto-save-path"]="true"===localStorage["auto-save-path"],localStorage.removeItem("auto-save-path"),t=!0),localStorage["show-noti"]&&(r["show-noti"]="true"===localStorage["show-noti"],localStorage.removeItem("show-noti"),t=!0),localStorage.popupTab&&(r.popupTab=localStorage.popupTab,localStorage.removeItem("popupTab"),t=!0),localStorage.activeTab&&(r.activeTab=localStorage.activeTab,localStorage.removeItem("activeTab"),t=!0),localStorage["save-as"]&&(r["save-as"]="true"===localStorage["save-as"],localStorage.removeItem("save-as"),t=!0),localStorage["allow-remind-mic"]&&(r["allow-remind-mic"]="true"===localStorage["allow-remind-mic"],localStorage.removeItem("allow-remind-mic"),t=!0),localStorage.record_mic&&(r.record_mic="true"===localStorage.record_mic,localStorage.removeItem("record_mic"),t=!0),localStorage.record_countdown&&(i=localStorage.record_countdown,isNaN(i)||(r.record_countdown=3),localStorage.removeItem("record_countdown"),t=!0),localStorage.max_resolution&&(r.max_resolution=localStorage.max_resolution,localStorage.removeItem("max_resolution"),t=!0),localStorage["save-location"]&&(r["save-location"]=localStorage["save-location"],localStorage.removeItem("save-location"),t=!0),localStorage["save-capture-location"]&&(r["save-capture-location"]=localStorage["save-capture-location"],localStorage.removeItem("save-capture-location"),t=!0),localStorage.record_tabsound&&(r.record_tabsound="true"===localStorage.record_tabsound,localStorage.removeItem("record_tabsound"),t=!0),localStorage.record_toolbar&&(r.record_toolbar="true"===localStorage.record_toolbar,localStorage.removeItem("record_toolbar"),t=!0),localStorage.record_type&&(r.record_type=localStorage.record_type,localStorage.removeItem("record_type"),t=!0),localStorage["gmail-btn"]&&(r["gmail-btn"]="true"===localStorage["gmail-btn"],localStorage.removeItem("gmail-btn"),t=!0),localStorage["context-menu"]&&(r["context-menu"]="true"===localStorage["context-menu"],localStorage.removeItem("context-menu"),t=!0),localStorage.ctl_bar&&(r.ctl_bar="true"===localStorage.ctl_bar,localStorage.removeItem("ctl_bar"),t=!0),localStorage.version&&(r.version=localStorage.version,t=!0),t&&s("options",r);case 37:e.next=41;break;case 39:e.prev=39,e.t0=e.catch(0);case 41:case"end":return e.stop()}}),e,null,[[0,39]])})))).apply(this,arguments)}function p(e,t){if(!navigator.enumerateDevices&&window.MediaStreamTrack&&window.MediaStreamTrack.getSources&&(navigator.enumerateDevices=window.MediaStreamTrack.getSources.bind(window.MediaStreamTrack)),!navigator.enumerateDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=navigator.mediaDevices.enumerateDevices.bind(navigator)),navigator.enumerateDevices){var r=[],o=[],n=[],a=[],i=[],c=[];navigator.enumerateDevices((function(t){t.forEach((function(e){var t,s={};for(var l in e)s[l]=e[l];r.forEach((function(e){e.deviceId===s.deviceId&&(t=!0)})),t||("audio"===s.kind&&(s.kind="audioinput"),"video"===s.kind&&(s.kind="videoinput"),s.deviceId||(s.deviceId=s.id),s.id||(s.id=s.deviceId),"audioinput"!==s.kind&&"audio"!==s.kind||s.label&&!s.label.startsWith("AS")&&a.push(s),"audiooutput"===s.kind&&i.push(s),"videoinput"!==s.kind&&"video"!==s.kind||c.push(s),-1!==s.kind.indexOf("audio")&&s.label&&!s.label.startsWith("AS")&&o.push(s),-1!==s.kind.indexOf("video")&&n.push(s),r.push(s))})),e&&e({allMediaDevices:r,allVideoDevices:n,allAudioDevices:o,videoInputDevices:c,audioInputDevices:a,audioOutputDevices:i})}))}else t(null,"Neither navigator.mediaDevices.enumerateDevices NOR MediaStreamTrack.getSources are available.")}navigator.mediaDevices&&navigator.mediaDevices.enumerateDevices&&(navigator.enumerateDevices=function(e){navigator.mediaDevices.enumerateDevices().then(e)});var m={preview:{ws:"wss",domain:"preview.awesomescreenshot.com",cookie:"awesomescreenshot.com",schema:"https"},www:{ws:"wss",domain:"www.awesomescreenshot.com",cookie:"awesomescreenshot.com",schema:"https"},alpha:{ws:"wss",domain:"alpha.awesomescreenshot.com",cookie:"awesomescreenshot.com",schema:"https"},local:{ws:"wss",domain:"www.awesomescreenshot.cn",cookie:"awesomescreenshot.cn",schema:"https"}};for(var v in m){var g=m[v];g.baseUrl=g.schema+"://"+g.domain,g.wsUrl=g.ws+"://"+g.domain}const w=m.www;r(39624),r(30365),r(73656),r(11791);function y(e,t){chrome.runtime.sendMessage({action:"googleEvent",name:e,extra:t})}function b(){var e=navigator.userAgent,t=e.indexOf("Chrome/"),r=e.substring(t+7,e.length),o=r.indexOf("."),n=r.substring(0,o);return parseInt(n)<116}function k(e){!function(e,t){chrome.tabs.query(Object.assign({active:!0},e),(function(e){t(e[0])}))}({},(function(t){var r={url:e};t&&t.incognito||!t?chrome.windows.getAll((function(e){e.forEach((function(e){e.incognito||"normal"!==e.type||(r.windowId=e.id)})),x(r)})):(r.index=(t?t.index:currentTabIndex||0)+1,r.windowId=t?t.windowId:currentWindowId,x(r))}))}function x(e){e&&e.url&&(e.hasOwnProperty("index")&&!e.index&&delete e.index,chrome.tabs.create(e,(function(e){chrome.windows.update(e.windowId,{focused:!0})})))}Math.pow(2,31);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function S(){S=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new j(o||[]);return n(i,"_invoke",{value:C(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function g(){}function w(){}function y(){}var b={};l(b,i,(function(){return this}));var $=Object.getPrototypeOf,k=$&&$($(N([])));k&&k!==r&&o.call(k,i)&&(b=k);var x=y.prototype=g.prototype=Object.create(b);function I(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function L(e,t){function r(n,a,i,c){var s=d(e[n],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==_(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function C(t,r,o){var n=f;return function(a,i){if(n===p)throw Error("Generator is already running");if(n===m){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var c=o.delegate;if(c){var s=E(c,o);if(s){if(s===v)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===f)throw n=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=p;var l=d(t,r,o);if("normal"===l.type){if(n=o.done?m:h,l.arg===v)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=m,o.method="throw",o.arg=l.arg)}}}function E(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,E(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var a=d(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function O(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function T(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function j(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(O,this),this.reset(!0)}function N(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(_(t)+" is not iterable")}return w.prototype=y,n(x,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:w,configurable:!0}),w.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},I(L.prototype),l(L.prototype,c,(function(){return this})),t.AsyncIterator=L,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new L(u(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},I(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=N,j.prototype={constructor:j,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(T),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return c.type="throw",c.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),T(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;T(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:N(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function I(e,t,r,o,n,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(o,n)}function L(e,t,r){return chrome.tabs.sendMessage(e,t,{frameId:0},r)}function C(e,t){return chrome.runtime.sendMessage(e,t)}function E(e,t){return O.apply(this,arguments)}function O(){var e;return e=S().mark((function e(t,r){return S().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.target="offscreen",b()){e.next=5;break}return e.abrupt("return",C(t,r));case 5:return e.next=7,l("recordTab");case 7:L(e.sent,t,r).catch((function(){}));case 9:case"end":return e.stop()}}),e)})),O=function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function i(e){I(a,o,n,i,c,"next",e)}function c(e){I(a,o,n,i,c,"throw",e)}i(void 0)}))},O.apply(this,arguments)}function T(e){return new Promise((function(t,r){C({action:"record/getInfo",keys:e,target:"offscreen"}).then(t).catch(r)}))}var j=1073741824,N=2,P=1;function M(e){return M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},M(e)}function A(){A=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:I(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function g(){}function w(){}function y(){}var b={};l(b,i,(function(){return this}));var $=Object.getPrototypeOf,k=$&&$($(T([])));k&&k!==r&&o.call(k,i)&&(b=k);var x=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,a,i,c){var s=d(e[n],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==M(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function I(t,r,o){var n=f;return function(a,i){if(n===p)throw Error("Generator is already running");if(n===m){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var c=o.delegate;if(c){var s=L(c,o);if(s){if(s===v)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===f)throw n=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=p;var l=d(t,r,o);if("normal"===l.type){if(n=o.done?m:h,l.arg===v)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=m,o.method="throw",o.arg=l.arg)}}}function L(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var a=d(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(M(t)+" is not iterable")}return w.prototype=y,n(x,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:w,configurable:!0}),w.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new S(u(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return c.type="throw",c.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;E(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:T(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function D(e,t,r,o,n,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(o,n)}function G(){return{height:window.screen.height,width:window.screen.width,left:window.screen.availLeft,top:window.screen.availTop}}const F=function(){return chrome.tabs.query({currentWindow:!0}).then(function(){var e,t=(e=A().mark((function e(t){var r,o;return A().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<t.length)){e.next=12;break}if(!/^(https?:\/\/)/.test(t[r].url)){e.next=9;break}return e.next=6,n=t[r].id,chrome.scripting.executeScript({target:{tabId:n},func:G}).then((function(e){return e[0].result})).catch((function(){if("undefined"!=typeof window)return G()}));case 6:if(!(o=e.sent)){e.next=9;break}return e.abrupt("return",o);case 9:r++,e.next=1;break;case 12:return e.abrupt("return",G());case 13:case"end":return e.stop()}var n}),e)})),function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function i(e){D(a,o,n,i,c,"next",e)}function c(e){D(a,o,n,i,c,"throw",e)}i(void 0)}))});return function(e){return t.apply(this,arguments)}}())};function R(){R=function(){return t};var e,t={},r=Object.prototype,o=r.hasOwnProperty,n=Object.defineProperty||function(e,t,r){e[t]=r.value},a="function"==typeof Symbol?Symbol:{},i=a.iterator||"@@iterator",c=a.asyncIterator||"@@asyncIterator",s=a.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(e){l=function(e,t,r){return e[t]=r}}function u(e,t,r,o){var a=t&&t.prototype instanceof g?t:g,i=Object.create(a.prototype),c=new O(o||[]);return n(i,"_invoke",{value:I(e,r,c)}),i}function d(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(e){return{type:"throw",arg:e}}}t.wrap=u;var f="suspendedStart",h="suspendedYield",p="executing",m="completed",v={};function g(){}function w(){}function y(){}var b={};l(b,i,(function(){return this}));var $=Object.getPrototypeOf,k=$&&$($(T([])));k&&k!==r&&o.call(k,i)&&(b=k);var x=y.prototype=g.prototype=Object.create(b);function _(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function S(e,t){function r(n,a,i,c){var s=d(e[n],e,a);if("throw"!==s.type){var l=s.arg,u=l.value;return u&&"object"==z(u)&&o.call(u,"__await")?t.resolve(u.__await).then((function(e){r("next",e,i,c)}),(function(e){r("throw",e,i,c)})):t.resolve(u).then((function(e){l.value=e,i(l)}),(function(e){return r("throw",e,i,c)}))}c(s.arg)}var a;n(this,"_invoke",{value:function(e,o){function n(){return new t((function(t,n){r(e,o,t,n)}))}return a=a?a.then(n,n):n()}})}function I(t,r,o){var n=f;return function(a,i){if(n===p)throw Error("Generator is already running");if(n===m){if("throw"===a)throw i;return{value:e,done:!0}}for(o.method=a,o.arg=i;;){var c=o.delegate;if(c){var s=L(c,o);if(s){if(s===v)continue;return s}}if("next"===o.method)o.sent=o._sent=o.arg;else if("throw"===o.method){if(n===f)throw n=m,o.arg;o.dispatchException(o.arg)}else"return"===o.method&&o.abrupt("return",o.arg);n=p;var l=d(t,r,o);if("normal"===l.type){if(n=o.done?m:h,l.arg===v)continue;return{value:l.arg,done:o.done}}"throw"===l.type&&(n=m,o.method="throw",o.arg=l.arg)}}}function L(t,r){var o=r.method,n=t.iterator[o];if(n===e)return r.delegate=null,"throw"===o&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==o&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+o+"' method")),v;var a=d(n,t.iterator,r.arg);if("throw"===a.type)return r.method="throw",r.arg=a.arg,r.delegate=null,v;var i=a.arg;return i?i.done?(r[t.resultName]=i.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,v):i:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function E(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function T(t){if(t||""===t){var r=t[i];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,a=function r(){for(;++n<t.length;)if(o.call(t,n))return r.value=t[n],r.done=!1,r;return r.value=e,r.done=!0,r};return a.next=a}}throw new TypeError(z(t)+" is not iterable")}return w.prototype=y,n(x,"constructor",{value:y,configurable:!0}),n(y,"constructor",{value:w,configurable:!0}),w.displayName=l(y,s,"GeneratorFunction"),t.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===w||"GeneratorFunction"===(t.displayName||t.name))},t.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,s,"GeneratorFunction")),e.prototype=Object.create(x),e},t.awrap=function(e){return{__await:e}},_(S.prototype),l(S.prototype,c,(function(){return this})),t.AsyncIterator=S,t.async=function(e,r,o,n,a){void 0===a&&(a=Promise);var i=new S(u(e,r,o,n),a);return t.isGeneratorFunction(r)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},_(x),l(x,s,"Generator"),l(x,i,(function(){return this})),l(x,"toString",(function(){return"[object Generator]"})),t.keys=function(e){var t=Object(e),r=[];for(var o in t)r.push(o);return r.reverse(),function e(){for(;r.length;){var o=r.pop();if(o in t)return e.value=o,e.done=!1,e}return e.done=!0,e}},t.values=T,O.prototype={constructor:O,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(E),!t)for(var r in this)"t"===r.charAt(0)&&o.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(o,n){return c.type="throw",c.arg=t,r.next=o,n&&(r.method="next",r.arg=e),!!n}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=o.call(i,"catchLoc"),l=o.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,v):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),E(r),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var o=r.completion;if("throw"===o.type){var n=o.arg;E(r)}return n}}throw Error("illegal catch attempt")},delegateYield:function(t,r,o){return this.delegate={iterator:T(t),resultName:r,nextLoc:o},"next"===this.method&&(this.arg=e),v}},t}function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var o,n,a,i,c=[],s=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;s=!1}else for(;!(s=(o=a.call(r)).done)&&(c.push(o.value),c.length!==t);s=!0);}catch(e){l=!0,n=e}finally{try{if(!s&&null!=r.return&&(i=r.return(),Object(i)!==i))return}finally{if(l)throw n}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?W(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,o=Array(t);r<t;r++)o[r]=e[r];return o}function B(e,t,r,o,n,a,i){try{var c=e[a](i),s=c.value}catch(e){return void r(e)}c.done?t(s):Promise.resolve(s).then(o,n)}function q(e){return function(){var t=this,r=arguments;return new Promise((function(o,n){var a=e.apply(t,r);function i(e){B(a,o,n,i,c,"next",e)}function c(e){B(a,o,n,i,c,"throw",e)}i(void 0)}))}}function H(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function Y(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?H(Object(r),!0).forEach((function(t){V(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):H(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function V(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=z(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,t||"default");if("object"!=z(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==z(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function z(e){return z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},z(e)}var J,K=w.baseUrl,Q=!1,X=null,Z=null,ee=null,te=0,re=!1,oe=!1,ne=!1,ae=100,ie=0,ce=20,se=0,le=null,ue=!1,de=!0,fe=!1,he=null,pe=!1,me=!1,ve=!1,ge=!1,we=[],ye=[],be=!1,$e=!1,ke=!1,xe={},_e="",Se=!1;function Ie(e){chrome.tabs.create({url:e})}function Le(e,t){chrome.tabs.query(Object.assign({active:!0,currentWindow:!0},e),(function(e){t(e[0])}))}function Ce(e,t){"object"===z(e)?xe=Y(Y({},xe),e):"string"==typeof e&&(xe=Y(Y({},xe),{},V({},e,t))),s("options",xe)}$("[data-i18n-id]").each((function(){var e=$(this).attr("data-i18n-id");$(this).html(chrome.i18n.getMessage(e))})),$("[data-i18n-text-id]").each((function(){var e=$(this).attr("data-i18n-text-id");$(this).attr("data-text",chrome.i18n.getMessage(e))})),$("[data-i18n-aria-label]").each((function(){var e=$(this).attr("data-i18n-aria-label");$(this).attr("aria-label",chrome.i18n.getMessage(e))})),C({action:"isCapturing"},(function(e){e&&Ge("capturing-view")}));function Ee(){return Ee=q(R().mark((function e(){var t,r,o,n,a,i,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=3,T("recordingStatus").catch((function(e){}));case 3:if(t=e.sent,"recording"!==(_e=t)){e.next=17;break}return Ge("recording-view"),ft(),rt(),setInterval(yt,100),e.next=13,T(["isPaused","socketClient"]);case 13:r=e.sent,o=U(r,1),o[0]&&dt(!0);case 17:return e.next=19,f();case 19:return e.next=22,l();case 22:if(n=e.sent,xe=n.options,"preparing"!==_e){e.next=37;break}if(!b()){e.next=36;break}if(!(a=n.recordBgWin)||!a.winId){e.next=34;break}return e.next=32,chrome.windows.get(a.winId).catch((function(e){}));case 32:(i=e.sent)&&"popup"===i.type&&chrome.windows.update(a.winId,{focused:!0}).then((function(){window.close()}));case 34:e.next=37;break;case 36:C({action:"reopenPrepare"},(function(){window.close()}));case 37:return n.recordingInfo,xe["dark-mode"]&&$("body").addClass("dark-mode"),"recording"!==_e&&"preparing"!==_e?chrome.cookies.getAll({url:K},(function(e){if(chrome.runtime.lastError,e||(e=[]),e){for(var t=0,r=e.length;t<r;t++)if("screenshot_personal_fullname"===e[t].name)var o=decodeURI(e[t].value);else if("screenshot_personal_type"===e[t].name)var n=e[t].value;else if("screenshot_personal_premium_level"===e[t].name)var a=e[t].value;else if("screenshot_personal_permission"===e[t].name)e[t].value.split(",");else if("screenshot_personal_uid"===e[t].name)var i=e[t].value;o?(Q=!0,$(".aws-info").find(".user-name").text(o).attr("title",o),$("#no-signin").hide(),$("#aws-account").show(),chrome.storage.local.get("userinfo",(function(e){e.userinfo&&(te=parseInt(a),re=e.userinfo.newPremium,oe=e.userinfo.allowUploadImage,ne=e.userinfo.allowVideoCreate,ae=e.userinfo.imageLimitation,ie=e.userinfo.imageTotalLimitation,ce=e.userinfo.videoLimitation,se=e.userinfo.videoTotalLimitation,xe.videoTotalLimitation=se,be=!0,chrome.storage.local.set({userinfo:{newPremium:e.userinfo.newPremium,uid:e.userinfo.uid,premiumLevel:parseInt(a),allowUploadImage:e.userinfo.allowUploadImage,allowVideoCreate:e.userinfo.allowVideoCreate,imageLimitation:e.userinfo.imageLimitation,imageTotalLimitation:e.userinfo.imageTotalLimitation,videoLimitation:e.userinfo.videoLimitation,videoTotalLimitation:e.userinfo.videoTotalLimitation}}),ze()),$("#loading").addClass("active"),$.ajax({method:"GET",url:K+"/api/v1/user/einfo"}).done((function(e){te=parseInt(e.data.premiumLevel),re=e.data.newPremium,oe=e.data.permission.allowUploadImage,ne=e.data.permission.allowVideoCreate,ae=e.data.counts.imageLimitation,ie=e.data.counts.imageTotalLimitation,ce=e.data.counts.videoLimitation,se=e.data.counts.videoTotalLimitation,xe.videoTotalLimitation=se,be=!0,chrome.storage.local.set({userinfo:{newPremium:re,uid:i,premiumLevel:te,allowUploadImage:oe,allowVideoCreate:ne,imageLimitation:ae,imageTotalLimitation:ie,videoLimitation:ce,videoTotalLimitation:se}}),$("#loading").removeClass("active"),ze(),setTimeout((function(){$(document.body).removeClass("no-transition")}),500)})).catch((function(e){$("#loading").addClass("hide"),setTimeout((function(){$(document.body).removeClass("no-transition")}),500)}))}))):(be=!0,chrome.storage.local.remove("userinfo"),"local"===xe["save-location"]&&He(),$("#loading").addClass("hide"),$("#no-signin").show(),$("#aws-account").hide(),ze()),"0"==n?$(".aws-user").removeClass("premium"):void 0===n?($(".aws-premium-icon").hide(),$(".aws-upgrade").hide()):$(".aws-user").addClass("premium"),Q||pt()}})):Oe(),e.next=44,T("isInCountdown").catch((function(){}));case 44:c=e.sent,"preparing"!==_e&&"countdown"!==_e||(Ge(c?"video-countdown-view":"video-prepare-view"),le=setInterval(q(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l("recordingStatus");case 2:if("recording"!==e.sent){e.next=11;break}Ge("recording-view"),clearInterval(le),Oe(),le=null,setInterval(yt,100),e.next=16;break;case 11:if(!c){e.next=16;break}return e.next=14,T("countdown");case 14:t=e.sent,$("#countdown-num").text(t);case 16:case"end":return e.stop()}}),e)}))),100)),Te(),je(),function(){function e(e,t){for(var r=0;r<t.length;r++)if(e===t[r].deviceId)return!0;return!1}function t(t,r){if(r.length){var o=$("#"+t+"-source");r.forEach((function(e){$("<option value='"+e.deviceId+"'>"+e.label+"</option>").appendTo(o)})),xe[t+"-deviceId"]&&e(xe[t+"-deviceId"],r)&&o.val(xe[t+"-deviceId"])}}function r(t,r){if(r.length){var o=$("#"+t+"-source-recording");r.forEach((function(e){$("<option value='"+e.deviceId+"'>"+e.label+"</option>").appendTo(o)})),xe[t+"-deviceId"]&&e(xe[t+"-deviceId"],r)&&o.val(xe[t+"-deviceId"])}}Promise.all([Fe(),Re(),Ue()]).then((function(){ve&&xe.record_mic&&we.length>0?($("#record-mic").prop("checked",!0),$("#record-mic").parents(".record-option-item").find(".source-part").show(),$("volume-canvas").show(),$("#mute").hide(),$("#audio").show(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("off_mic_btn"))):!ve||we.length<1?($("#mute").show(),$("#mute").find(".svg-icon").addClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn"))):!0!==xe.record_mic&&($("#mute").show(),$("#mute").find(".svg-icon").removeClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn"))),ge&&xe.record_cam&&ye.length>0?($("#record-cam").prop("checked",!0),$("#record-cam").parents(".record-option-item").find(".source-part").show(),$("#nocam").hide(),$("#cam").show(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("off_cam_btn"))):!ge||ye.length<1?($("#nocam").show(),$("#nocam").find(".svg-icon").addClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))):xe.record_cam||($("#nocam").show(),$("#nocam").find(".svg-icon").removeClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))),$(".option-source").find("select").on("change",(function(){var e=$(this).attr("data-source"),t=$(this).val();xe[e+"-deviceId"]=t,$(".tab-record").hasClass("active")&&"mic"===e?(!1===xe.record_mic&&Ce({record_mic:!0}),Me(!0)):$(".tab-record").hasClass("active")&&"cam"===e&&(Ce({record_cam:!0}),Ae(!0))})),$(".device-recording-select").find("select").on("change",(function(e){var t=$(this).attr("data-source"),r=$(this).val();Ce(V({},t+"-deviceId",r)),"mic"===t?E({action:"record/changeMic",deviceId:r}):"cam"===t&&E({action:"record/changeCamera",deviceId:r})})),$("input[name=record-type]").on("change",(function(e,t){ke=!(!t&&!$e),$e||t?$e=!1:("custom"!==this.value&&Ce({record_type:this.value}),Pe()),ke||Me(!0===xe.record_mic),Ae(!0===xe.record_cam),Je(this.value),$("#record-menu").attr("class",this.value)})),$(".setup-btn").on("click",(function(){Ie("/getAccess.html")})),$e?Ne():($("#record-type-"+xe.record_type).trigger("click",["autofill"]),Pe()),$("#more-action").on("click",(function(){$(".video-setting-wrapper").addClass("show"),$(".menu-content").addClass("show")})),$(".video-setting-wrapper").on("click",(function(){$(".menu-content").removeClass("show"),$(".video-setting-wrapper").removeClass("show"),tt()})),$("#back-menu").on("click",(function(){$(".menu-content").removeClass("show"),$(".video-setting-wrapper").removeClass("show"),tt()})),$(".menu-content").on("click",(function(e){e.stopPropagation()})),$("#auto-stop-action").on("click",(function(){$(".video-setting-wrapper").show(),$(".menu-content").addClass("show"),function(){it.apply(this,arguments)}()})),pe?we.length?(t("mic",we),r("mic",we)):($(".setup-mic-btn").show(),$(".record-option-microphone").find(".action").hide()):$(".record-option-microphone").find(".record-option-title").text("No Microphone detected").addClass("no").end().find(".action").hide(),me?ye.length?(t("cam",ye),t("cam-only",ye),r("cam",ye),$("#cam-only-source-part").show()):($(".setup-cam-btn").show(),$(".record-option-camera").find(".action").hide()):($(".record-option-camera").find(".record-option-title").addClass("no").text("No Camera detected").end().find(".action").hide(),$(".record-option-camera-only").find(".record-option-title").addClass("no").text("No Camera detected"))})).catch((function(e){})),Je(xe.record_type),$("#mic-reminder").prop("checked",xe["allow-remind-mic"]),et(),$(".custom-select[data-option=save-location]").find(".select-option-item[data-value="+xe["save-location"]+"]").trigger("mousedown",["autofill"]),$(".custom-select[data-option=save-capture-location]").find(".select-option-item[data-value="+xe["save-capture-location"]+"]").trigger("mousedown",["autofill"]);var o=xe["video-format"];o||(o="mp4");function n(){xe.record_tabsound?($("#tabsound").show(),$("#tabsoundoff").hide(),$("#record-tabsound").prop("checked",!0)):($("#tabsound").hide(),$("#tabsoundoff").show(),$("#record-tabsound").prop("checked",!1))}function a(e){var t="none"!==$("#audio").css("display"),r=$("#ctl-bar").prop("checked"),o=$("input[name=record-type]:checked").val(),n=xe.record_countdown,a=$(".custom-select[data-option=max_resolution]").attr("data-value")||720,i=$(".custom-select[data-option=save-location").attr("data-value"),c=$(".custom-select[data-option=video-format").attr("data-value")||"mp4",s="none"!==$("#cam").css("display"),l=$("#cam-source").val();$("#cam-source").val()&&xe["cam-deviceId"]||ye.length>0&&Ce({"cam-deviceId":l=ye[0].deviceId});var u=$("#mic-source").val();$("#mic-source").val()&&xe["mic-deviceId"]||we.length>0&&Ce({"mic-deviceId":u=we[0].deviceId});var d=$("#record-tabsound").prop("checked");if(!t&&we.length>0&&!e&&xe["allow-remind-mic"])De("open-mic");else{var f=parseInt($("#sec-field")[0].value),h=parseInt($("#min-field")[0].value),p=parseInt($("#hour-field")[0].value),m={isRecordMic:t,recordType:o,countdown:n,saveLocation:i,videoFormat:c,resolution:a,isRecordCam:s,isShowToolbar:r,camDeviceId:l,micDeviceId:u,isRecordTabSound:d,isAutoStop:$("#auto-stop").prop("checked"),autoStopHour:p,autoStopMin:h,autoStopSec:f},v=window.screen.width,g=window.screen.height,w={"4k":{width:3084,height:2160},1080:{width:1920,height:1080},720:{width:1280,height:720}};if("desktop"===o&&(v<w[a].width?(m.width=v,m.height=g):(m.width=w[a].width,m.height=w[a].height)),m.screenWidth=v*window.devicePixelRatio,m.screenHeight=g*window.devicePixelRatio,"cloud"===xe["save-location"]){if(Q){if(pe&&0===we.length)y="/setup-react.html?from=record&isSignIn=true"}else if(pe){if(0!==we.length)return void De("sign-in","record");var y="/setup-react.html?from=record"}else var y="/setup-react.html?from=record&isGranted=true";if(y&&(!xe.has_setup||!Q))return chrome.tabs.create({url:y}),void Ce({has_setup:!0})}Le({},function(){var e=q(R().mark((function e(t){var r,o,n,a;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m.recordingTabId=t.id,m.mainWinId=t.windowId,m.recordingTabTitle=t.title,m.recordingTabUrl=t.url,r=m.recordType,o=m.camDeviceId,n=m.isRecordCam,e.next=7,F();case 7:a=e.sent,"camera"===r?(m.recordingTabTitle="camera",C({action:"openCameraPage",screen:a,recordOptions:m},(function(){window.close()}))):("desktop"===r&&n&&chrome.runtime.onConnect.addListener((function(e){"record"===e.name&&(e.postMessage({action:"startCamera",camDeviceId:o}),window.close())})),C({action:"startRecord",recordOptions:m,screen:a},(function(){"desktop"===r&&n?n&&setTimeout((function(){window.close()}),600):window.close()})));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}}function i(){return c.apply(this,arguments)}function c(){return(c=q(R().mark((function e(){var t,r,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.storage.estimate();case 2:return t=e.sent,r=t.usage,o=t.quota,e.abrupt("return",o-r);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}$(".custom-select[data-option=video-format]").find(".select-option-item[data-value="+o+"]").trigger("mousedown",["autofill"]),Ke("countdown",xe.record_countdown,!1),$("#auto-stop").prop("checked",xe["auto-timer-stop"]),Ke("hour",xe["auto-hour"],!1),Ke("min",xe["auto-min"],!1),Ke("sec",xe["auto-sec"],!1),tt(),et(),$("#countdown-input").on("change",(function(){xe.record_countdown=$(this).val()})),$("#record-tabsound").prop("checked",xe.record_tabsound),n(),$("#record-tabsound").on("change",(function(){Ce({record_tabsound:$(this).prop("checked")}),n()})),$("#ctl-bar").on("change",(function(){Ce({ctl_bar:$(this).prop("checked")}),$t($(this).prop("checked"))})),$("#mic-reminder").on("change",(function(){Ce({"allow-remind-mic":$(this).prop("checked")})})),$("#auto-stop").on("change",(function(){$("#auto-stop").prop("checked")&&te<2?(De("auto-stop-upgrade","Auto-stop-limit"),$("#auto-stop").prop("checked",!1)):(et(),Ce("auto-timer-stop",$("#auto-stop").prop("checked")))})),$("#local-recording").on("click",(function(){Ie("/video-list.html")})),$(".record-option-source").find(".field-head").on("click",(function(){"ctl-bar"===$(this).attr("data-type")&&(Ce({ctl_bar:!xe.ctl_bar}),$t(xe.ctl_bar))})),$(".record-option-source").find(".device-item").on("click",(function(){var e=$(this).attr("data-type");if("mic"===e){var t=!1,r="none"===$("#audio").css("display");ve?xe.record_mic&&!r?Ce({record_mic:!1}):(Ce({record_mic:!0}),t=!0):Ie("/getAccess.html"),Me(t)}else if("cam"===e){var o=!1;ge?"camera"!==$("input[name=record-type]:checked").val()&&(xe.record_cam?Ce({record_cam:!1}):(Ce({record_cam:!0}),o=!0),Ae(o)):Ie("/getAccess.html")}else"tabsound"===e&&(Ce({record_tabsound:!xe.record_tabsound}),n())})),$(".record-option-checkbox").on("change",(function(){var e=$(this).attr("data-type");if($(this).prop("checked")){if("mic"===e)var t=ve;else if("cam"===e)t=ge;xe["record_"+e]="true",!0===t?($("#"+e+"-source-part").show(),"cam"===e&&!xe.record_mic&&ve&&we&&(Ce({record_mic:!0}),$("#record-mic").prop("checked",!0),$("#mic-source-part").show()),"mic"===e&&gt()):Ie("/getAccess.html")}else Ce(V({},"record_"+e,!1)),$("#"+e+"-source-part").hide(),"mic"===e&&vt()})),$(".popup").find(".close").on("click",(function(){$(this).parents(".popup").hide(),this.classList.contains("cancel")&&pt()})),$(".bubble-bottom").find(".close").on("click",(function(){$(this).parents(".bubble-bottom").hide(),C({action:"updateDefaultIcon"}),s("haveAlertBackupList",!0)})),$(".popup").find(".sub-item").on("click",(function(){var e=$(this).attr("data-type");"image"===e?(Ce({"save-capture-location":"local"}),ze()):"video"===e?(Ce({"save-location":"local"}),ze()):"invite"===e&&Ie(K+"/invite"),$(this).parents(".popup").hide()})),$("#cancel-off").on("click",(function(){$(this).parents(".popup").hide()})),$("#comfig-off").on("click",(function(){E({action:"autoStop/toggle",isOn:!1}),rt(),$(this).parents(".popup").hide()})),$("#cancel-edit").on("click",(function(){$(this).parents(".popup").hide()})),$("#comfig-edit").on("click",q(R().mark((function e(){var t,r,o,n,a,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["recordTimeLength"]);case 2:if(t=e.sent,r=U(t,1),r[0],o=0,n=parseInt($("#e-min-field")[0].value),a=parseInt($("#e-hour-field")[0].value),!(o+n+a>0)){e.next=14;break}return e.next=11,Qe();case 11:i=e.sent,Se&&i&&E({action:"autoStop/updateTimer",data:{hour:a,min:n,sec:o}}),i&&(setTimeout((function(){rt()}),100),$(this).parents(".popup").hide());case 14:case"end":return e.stop()}}),e,this)})))),$("#edit-action").on("click",(function(){ct(),De("timer-edit")})),$("#cancel-action").on("click",(function(){De("timer-off")})),$(".input-field").on("focus",(function(e){$(this).attr("data-type");$(this).find("input")[0].focus()})),$(".input-field").find(".option-item").on("click",(function(){Ke($(this).attr("data-type"),$(this).attr("data-value"),!0)})),$(".input-field").find("input").on("focus",(function(e){var t=parseInt(e.target.value);isNaN(t)||0!=t||($(this)[0].value=""),$(this).parents(".input-field.time").addClass("focus")})),$(".input-field").find("input").on("blur",(function(e){$(this).parents(".input-field.time").removeClass("focus");var t=parseInt(e.target.value);isNaN(t)&&(e.target.value=0)})),$(".input-field").find("input").on("input",(function(e){Ke($(this).attr("data-type"),parseInt(e.target.value),!1)})),$(".input-field.reset").on("click",(function(){Ke("hour",0,!0),Ke("min",0,!0),Ke("sec",0,!0)})),$("#reset-Timer").on("click",(function(){E({action:"autoStop/resetTimer"})})),$(".popup").find(".change-local").on("click",(function(){$(this).parents(".popup").hide(),pt()})),$("#request-notification").on("click",(function(){chrome.permissions.request({permissions:["notifications"]},(function(e){$("#grant-notification").hide(),a()}))})),$("#mic-select-recording").on("click",(function(){we.length<=0&&Ie("/getAccess.html")})),$("#cam-select-recording").on("click",(function(){ye.length<=0&&Ie("/getAccess.html")})),$("#back-to-main").on("click",(function(){Ge("main-menu")})),$("#record-stop").on("click",(function(){E({action:"record/stop",from:"popup click"},(function(){window.close()}))})),$("#record-pause").on("click",(function(){dt(!0),E({action:"record/pause"})})),$("#record-resume").on("click",(function(){dt(!1),E({action:"record/resume"})})),$("#record-discard").on("click",(function(){$("#discard-popup").show()})),$("#discard-cancel").on("click",(function(){$("#discard-popup").hide()})),$("#discard-confirm").on("click",(function(){E({action:"record/stop",isDiscard:!0}),setTimeout((function(){window.close()}),100)})),$("#open-mic-cancel").on("click",(function(){a(!0)})),$("#open-mic-confirm").on("click",(function(){$(".device-item.mic").trigger("click"),a()})),$("#storage-cancel").on("click",(function(){$(this).parents(".popup").hide(),localStorage.alertStorage="1",a(ke)})),$("#record-start").on("click",q(R().mark((function e(){var t,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=!1,!navigator.brave){e.next=5;break}return e.next=4,navigator.brave.isBrave();case 4:t=e.sent;case 5:return e.next=7,i();case 7:if(r=e.sent,"cloud"!==xe["save-location"]||Q){e.next=12;break}De("sign-in","record"),e.next=18;break;case 12:if(!("cloud"===xe["save-location"]&&Q&&parseInt(te)<2&&se>=ce)){e.next=17;break}return De("upgrade-alert-video"),e.abrupt("return");case 17:"alerted"!==xe["alert-win"]&&navigator.platform.indexOf("Win")>=0&&"desktop"===$("input[name=record-type]:checked").val()?(De("win-compter-audio"),Ce({"alert-win":"alerted"})):r<j*P&&!t?($("#storage-cancel").hide(),De("storage-issue")):r<j*N&&!t?($("#storage-cancel").show(),De("storage-issue")):(localStorage.alertStorage="0",a(ke));case 18:case"end":return e.stop()}}),e)})))),$("#popup-audio-in-btn").on("click",q(R().mark((function e(){var t,r;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $(this).parents(".popup").hide(),Ce({"alert-win":"alerted"}),e.next=4,i();case 4:if(t=e.sent,r=!1,!navigator.brave){e.next=10;break}return e.next=9,navigator.brave.isBrave();case 9:r=e.sent;case 10:t<j*P&&!r?($("#storage-cancel").hide(),De("storage-issue")):t<j*N&&!r?($("#storage-cancel").show(),De("storage-issue")):(localStorage.alertStorage="0",a());case 11:case"end":return e.stop()}}),e,this)})))),$("#popup-sign-in-btn").on("click",(function(){var e=$(this).attr("data-reason");Ie("https://www.awesomescreenshot.com/signin?from="+("capture"===e?"ext_pop_capture":"record"===e?"ext_pop_record":"ext_pop_bottom"))})),$("#capture-guide").on("click",(function(){Ie("https://support.awesomescreenshot.com/hc/en-us/articles/4403241044249-How-to-take-a-screenshot-of-desktop-entire-screen-or-an-application-window")})),$(".upgrade-btn").on("click",(function(){var e=$(this).attr("data-reason");y("upgrade from recording menu ("+e+")","upgrade"),function(e,t){chrome.cookies.get({url:t,name:"screenshot_personal_type"},(function(r){k(r?t+"/pricing?from="+e:t+"/user/login?redirect="+t+"/pricing?from="+e)}))}(e,K)})),$("#toggle-camera").on("click",q(R().mark((function e(){var t,r,o,n;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["cameraStream","devicesInfo"]);case 2:t=e.sent,r=U(t,2),o=r[0],n=r[1],ye.length<1&&n.videoDevices<1?Ie("/getAccess.html"):E({action:"init-camera"}),o||$("#toggle-camera").find(".camera-action-icon").addClass("loading");case 8:case"end":return e.stop()}}),e)})))),$("#toggle-mic").on("click",q(R().mark((function e(){var t,r,o;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["audioStream","devicesInfo"]);case 2:t=e.sent,r=U(t,2),r[0],o=r[1],we.length<1&&o.audioDevices<1?Ie("/getAccess.html"):E({action:"record/toggleMic"});case 7:case"end":return e.stop()}}),e)})))),$("#toggle-ann-menu").on("click",(function(){E({action:"record/toggleToolbar"})})),$("#toggle-timer").on("click",q(R().mark((function e(){var t,r,o,n,a,i,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["autoTimerInfo","isAutoTimerStop"]);case 2:t=e.sent,r=U(t,2),o=r[0],n=r[1],a=o.timerHour,i=o.timerMin,c=o.timerSec,a+i+c>0&&n?De("timer-off"):(ct(),De("timer-edit"));case 8:case"end":return e.stop()}}),e)}))))}(),Le({},(function(e){L(e.id,{action:"check-videos"}).catch((function(e){}))})),E({action:"checkUploadingRecord"}).then(function(){var e=q(R().mark((function e(t){return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&!t.isBeginRecorded&&t.unfinished&&t.tookLongtime&&$(".backupList").show();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),C({action:"updateDefaultIcon"});case 53:case"end":return e.stop()}}),e)}))),Ee.apply(this,arguments)}function Oe(){var e;(e=K,new Promise((function(t,r){chrome.cookies.get({url:e,name:"screenshot_personal_premium_level"},(function(e){e&&parseInt(e.value)>1?t(!0):t(!1)}))}))).then((function(e){e||$("#toggle-timer").hide()}))}function Te(){!function(){if(localStorage.dev&&localStorage.devConfig){var e=localStorage.devConfig;$(document.body).append("<div class='dev-badge'>"+e+"</div>")}}(),$("#aws-info-upgrade").on("click",(function(){y("upgrade from main menu","upgrade"),Ie("https://www.awesomescreenshot.com/pricing?from=extMenu"),window.close()})),$("#aws-login").on("click",(function(){Ie(K+"/signin?from=ext_pop_bottom"),window.close()})),$(".link-item").on("click",(function(){Ie($(this).attr("data-url")),window.close()})),$("#user").on("click",(function(){Ie("https://www.awesomescreenshot.com/settings"),window.close()})),$(".feedback").on("click",(function(){Ie("/feedback.html"),window.close()})),$(".backToMenu").on("click",(function(){Ge("main-menu")})),$(".tab-header-item").on("click",(function(){var e=$(this).attr("data-tab");($(".tab-header").removeClass("screenshot record").addClass(e),$(".tab-header-item").removeClass("active"),$(this).addClass("active"),$(".tab-item").removeClass("active"),$(".tab-item.tab-"+e).addClass("active"),e&&Ce({activeTab:e}),"record"===e)?"none"===$("#audio").css("display")||gt():"screenshot"===e&&vt()})),"record"===xe.popupTab||"remember"===xe.popupTab&&"record"===xe.activeTab?$(".tab-header-item[data-tab='record']").trigger("click"):"screenshot"!==xe.activeTab&&Ce({activeTab:"screenshot"}),$(".action-btn").on("click",(function(){var e=$(this);e.hasClass("option")?Ie("/option-react.html"):e.hasClass("feedback")?Ie("/feedback.html"):e.hasClass("more")?(e.toggleClass("expand"),$(".more-links").toggle()):e.hasClass("recording")?Ie("/video-list.html"):e.hasClass("sign-out")?Ie(K+"/web/user/logout"):e.hasClass("backupList")&&(C({action:"updateDefaultIcon"}),s("haveAlertBackupList",!0),Ie("/backup-list.html"))})),$(".more-links-item").on("click",(function(){var e=$(this);if(e.hasClass("mp"))var t=K+"/all_images";else if(e.hasClass("mv"))t=K+"/all_videos";else if(e.hasClass("logout"))t=K+"/web/user/logout";Ie(t)})),chrome.tabs.query({active:!0,currentWindow:!0},(function(e){var t=e[0],r=(J=t.url).match(/(https?|file):\/\/*\/*/gi);if(/Edg/.test(window.navigator.userAgent)?(null==r||J.match(/https:\/\/microsoftedge.microsoft.com\/addons/i)||kt(J))&&(de=!1):(null==r||kt(J))&&(de=!1),"complete"!=t.status&&($("#selected").attr({title:"Page still loading! Please wait."}).addClass("disabled"),!1),/http|https|file|ftp/.test(J.slice(0,5))||(de=!1),ue=!!/file:/.test(J.slice(0,5)),de)$("#record-type-custom");else{var o=document.getElementsByClassName("content-affect");Array.prototype.forEach.call(o,(function(e){e.classList.add("disable")})),$("#record-type-custom").attr({disabled:!0})}})),$("#open-setting").on("click",(function(){var e="chrome://extensions/?id="+chrome.runtime.id;chrome.tabs.create({url:e})})),chrome.extension.isAllowedFileSchemeAccess((function(e){fe=e})),chrome.runtime.onMessage.addListener((function(e,t,r){switch(e.action){case"enable_selected":if(J.match(/https:\/\/*\/*/gi))return void $("#selected").attr({title:"For security reason, Capture Selected Area doesn't work in https pages!"});$("#selected").attr({title:""}).css({color:"#000"});break;case"shownew":case"closeWin":window.close();break;case"entireCaptureProgress":$("#entire-progress-percentage").text(e.percentage),$("#entire-progress").css("width",e.percentage),e.scrollNum&&e.scrollNum>=1&&$("#stop-msg").show();break;case"updateRecordUI":ft();break;case"page-video-status":$e||(e.status?($e=!0,Ne()):Pe())}})),$(".custom-select").find(".select-option-item").on("mousedown",(function(e,t){var r=$(this),o=$(this).attr("data-value"),n=$(this).attr("data-text"),a=$(this).parents(".custom-select").attr("data-option");function i(e){r.parents(".custom-select").attr("data-value",o).find(".display-item").text(n),r.siblings().removeClass("selected").end().addClass("selected"),e||Ce(V({},a,o))}if("max_resolution"===a){var c="local"===xe["save-location"];"720"===o?(i(c),Be(o)):"1080"!==o&&"4k"!==o||(Q?c?te>1?(i(),Be(o)):De("signin-local-upgrade","Record_resolution"):te>1?(i(),Be(o)):De("signin-limit-upgrade","Record_resolution"):De("no-signin-local-upgrade","Record_resolution"))}else"save-location"===a?(Q?"local"===o?parseInt(te)<2&&0!==re||0===parseInt(te)?He():(parseInt(te),Ve()):parseInt(te)<2&&se<ce&&se>=.75*ce?(Ye(),$(".record-tip.try.video").css("display","flex"),$(".record-tip.video").find(".count").text(se+"/"+ce)):Ve():"local"===o?He():Ye(),"local"===o?$("#record-bubble").removeClass("hidde-bubble"):($("#record-bubble").addClass("hidde-bubble"),t||Q||De("sign-in","record")),i(),function(e){"local"===e?($("#cloud_icon").hide(),$("#local_icon").show()):($("#cloud_icon").show(),$("#local_icon").hide())}(o),be&&function(){var e=xe.max_resolution,t=(xe.record_toolbar,xe.ctl_bar);"local"===xe["save-location"]?Q&&te>1||(e=720,!1):Q?te<=1&&(e=720,!1):(e=720,!1);$(".custom-select[data-option=max_resolution]").find(".select-option-item[data-value="+e+"]").trigger("mousedown"),$t(t)}()):"video-format"==a?(i(),"mp4"===o?($("#webm_icon").hide(),$("#mp4_icon").show()):($("#webm_icon").show(),$("#mp4_icon").hide())):"record_countdown"===a?i():"save-capture-location"===a&&("local"===o?$("#capture-bubble").removeClass("hidde-bubble"):($("#capture-bubble").addClass("hidde-bubble"),t||Q||De("sign-in","capture")),i(),function(e){"local"===e?($("#cloud_icon_capture").hide(),$("#local_icon_capture").show()):($("#cloud_icon_capture").show(),$("#local_icon_capture").hide())}(o),Q&&"local"!==o&&parseInt(te)<1&&ie>=.75*ae&&ie<ae?($(".record-tip.try.img").css("display","flex"),$(".record-tip.img").find(".count_image").text(ie+"/"+ae)):qe())})),chrome.windows.getCurrent((function(e){Le({windowId:e.id},(function(t){chrome.action.getBadgeText({tabId:t.id},(function(t){"New"==t&&(chrome.action.setBadgeText({text:""}),C({action:"updateNewClickVersion"}),setTimeout((function(){chrome.tabs.create({url:"https://blog.awesomescreenshot.com/2022/02/15/workspace-a-collaborative-visual-repository-for-your-team/"}),e.close()}),100))}))}))}))}function je(){$(".capture-menu").find(".action-item").on("click",(function(){var e=this.id;if("visible"===e||"selected"===e||"entire"===e||"delay"===e||"sidebar"===e)if(ue&&!fe)De("file-access");else if(de||ue||"visible"===e||"delay"===e){if("cloud"===xe["save-capture-location"]){if(!Q)return void De("sign-in","capture");if(parseInt(te)<1&&ie>=ae)return void De("upgrade-alert-img")}"sidebar"===e&&(e="ocr",y("Sider_ocr_home_click","pop")),C({action:e,actionFrom:"pop"}),y("capture "+e,"capture"),"entire"===e?Ge("capturing-view"):setTimeout((function(){window.close()}),100)}else De("reject-access");else if("desktop"===e){if("cloud"===xe["save-capture-location"]){if(!Q)return void De("sign-in","capture");if(parseInt(te)<1&&ie>=ae)return void De("upgrade-alert-img")}C({action:e,actionFrom:"pop"}),setTimeout((function(){window.close()}),100),y("capture desktop","capture")}else if("annotate"===e){var t=chrome.runtime.getURL("")+"upload.html";chrome.tabs.create({url:t}),y("capture local","capture"),window.close()}else"sidebar"===e&&(C({action:"ocr",actionFrom:"pop"}),y("Click sidebar OCR","sidebar"),localStorage.promotion_new=!0,window.close())})),xe.delay_sec&&$("#delay").find(".countdown").text(xe.delay_sec+"s"),""!==xe.desktop_delay_sec&parseInt(xe.desktop_delay_sec)>0&&$("#desktop").find(".countdown").text(xe.desktop_delay_sec+"s"),function(){if(xe.msObj){var e=xe.msObj,t=1==e.visible.enable?"Ctrl+Shift+"+e.visible.key:"",r=1==e.selected.enable?"Ctrl+Shift+"+e.selected.key:"",o=1==e.entire.enable?"Ctrl+Shift+"+e.entire.key:"";t&&$("#visible").addClass("tooltip delay").attr("aria-label",t),t&&$("#selected").addClass("tooltip delay").attr("aria-label",r),o&&$("#entire").addClass("tooltip delay").attr("aria-label",o)}}(),$("#stop-entire-capture").on("click",(function(){C({action:"stop-entire-capture"})}))}function Ne(){$("#record-type-tab").trigger("click").trigger("change",!0),$("#record-mic").prop("checked",!1),$("#tabsound").show(),$("#tabsoundoff").hide(),$("#record-tabsound").prop("checked",!0),$(".record-tip.auto-tab-record").css("display","flex"),Me(!1)}function Pe(){$(".record-tip.auto-tab-record").css("display","none")}function Me(e){ve&&e&&we.length>0?($("volume-canvas").show(),"record"===$(".tab-header-item.active").attr("data-tab")&&gt(),$("#mute").hide(),$("#audio").show(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("off_mic_btn"))):!ve||we.length<1?($("#mute").show(),$("#mute").addClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn")),vt()):e||($("#mute").show(),$("#mute").removeClass("red"),$("#audio").hide(),$("#mic-device").attr("aria-label",chrome.i18n.getMessage("on_mic_btn")),vt())}function Ae(e){ge&&e&&ye.length>0?($("#nocam").hide(),$("#cam").show(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("off_cam_btn"))):!ge||ye.length<1?($("#nocam").show(),$("#nocam").addClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))):e||($("#nocam").show(),$("#nocam").removeClass("red"),$("#cam").hide(),$("#cam-device").attr("aria-label",chrome.i18n.getMessage("on_cam_btn")))}function De(e,t){var r=$(".popup[data-name="+e+"]");r.show(),t&&r.find(".popup-btn").attr("data-reason",t),"sign-in"===e&&($(".tab-header").hasClass("record")?($("#sign-in-reason").text("videos"),$(".popup").find(".change-local").hide()):($("#sign-in-reason").text("screenshots"),$(".popup").find(".change-local").show()))}function Ge(e){"main-menu"!==e&&vt(),$(".layout-view").hide(),$("#"+e).show()}function Fe(){return new Promise((function(e,t){p((function(t){pe=(he=t).audioInputDevices.length>0,me=he.videoInputDevices.length>0,we=We(he.audioInputDevices),ye=We(he.videoInputDevices),e()}))}))}function Re(){return navigator.permissions.query({name:"microphone"}).then((function(e){return"granted"===e.state&&(ve=!0),e.state}))}function Ue(){return navigator.permissions.query({name:"camera"}).then((function(e){return"granted"===e.state&&(ge=!0),e.state}))}function We(e){return e.filter((function(e,t,r){return""!==e.label&&r.findIndex((function(t){return t.deviceId===e.deviceId}))===t}))}function Be(e){switch(e){case"720":$("#hd_icon").show(),$("#fhd_icon").hide(),$("#4k_icon").hide();break;case"1080":$("#hd_icon").hide(),$("#fhd_icon").show(),$("#4k_icon").hide();break;case"4k":$("#hd_icon").hide(),$("#fhd_icon").hide(),$("#4k_icon").show()}}function qe(){$(".record-tip.try.img").hide()}function He(){$(".start-container").hasClass("limit")||$(".start-container").addClass("limit"),$(".record-tip.limit").show(),$(".record-tip.try").hide()}function Ye(){$(".start-container").removeClass("limit"),$(".record-tip.limit").hide()}function Ve(){$(".record-tip.try.video").hide(),Ye()}function ze(){$(".custom-select[data-option=save-location]").find(".select-option-item[data-value="+xe["save-location"]+"]").trigger("mousedown",["autofill"]),$(".custom-select[data-option=save-capture-location]").find(".select-option-item[data-value="+xe["save-capture-location"]+"]").trigger("mousedown",["autofill"])}function Je(e){$(".record-type-item").removeClass("selected"),$("#record-type-"+e).parents(".record-type-item").addClass("selected"),"tab"!==e&&"custom"!==e?($("#tab-sound").hide(),$(".option-source.ann").removeClass("fullWidth"),$(".option-source.ann").addClass("halfWidth"),$("#controlBar").html(chrome.i18n.getMessage("ctl_bar_title"))):($("#tab-sound").show(),$(".option-source.ann").addClass("fullWidth"),$(".option-source.ann").removeClass("halfWidth"),$("#controlBar").html(chrome.i18n.getMessage("ctl_bar_title_more"))),"camera"===e?($(".record-option-camera").hide(),$(".record-option-camera-only").show(),$(".option-source.ann").hide(),Ae(!0)):($(".record-option-camera").show(),$(".record-option-camera-only").hide(),$(".option-source.ann").show()),"camera"===e?ye.length?($("#record-start").removeClass("disabled"),$("#premission-tip").removeClass("show")):($("#record-start").addClass("disabled"),$("#premission-tip").addClass("show")):($("#record-start").removeClass("disabled"),$("#premission-tip").removeClass("show"))}function Ke(e,t,r){switch(e){case"countdown":t<0&&(t=0),isNaN(t)?(s("record_countdown",0),$("#countdown-label").html("0")):($("#countdown-field")[0].value=t,$("#countdown-label").html(t),Ce("record_countdown",t)),r&&$("#countdown-field").blur();break;case"hour":t>6?t=6:(t<0||isNaN(t)&&r)&&(t=0),"recording"===_e?(Se=!0,isNaN(t)?$("#e-hour-label").html("0"):($("#e-hour-field")[0].value=t,$("#e-hour-label").html(t)),r&&$("#e-hour-field").blur()):(isNaN(t)?($("#hour-label").html("0"),Ce("auto-hour",0)):($("#hour-field")[0].value=t,$("#hour-label").html(t),Ce("auto-hour",t),6==t&&(Ke("min",0,!1),Ke("sec",0,!1))),r&&$("#hour-field").blur());break;case"min":if(t>59?t=59:(t<0||isNaN(t)&&r)&&(t=0),"recording"===_e)Se=!0,isNaN(t)?$("#e-min-label").html("0"):($("#e-min-field")[0].value=t,$("#e-min-label").html(t)),r&&$("#e-min-field").blur();else{if(isNaN(t))$("#min-label").html("0"),Ce("auto-min",0);else(o=xe["auto-hour"])&&!isNaN(o)&&o>=6&&(t=0),$("#min-field")[0].value=t,$("#min-label").html(t),Ce("auto-min",t);r&&$("#min-field").blur()}break;case"sec":if(t>59?t=59:(t<0||isNaN(t)&&r)&&(t=0),"recording"===_e)Se=!0,isNaN(t)?$("#e-sec-label").html("0"):($("#e-sec-field")[0].value=t,$("#e-sec-label").html(t)),r&&$("#e-sec-field").blur();else{var o;if(isNaN(t))$("#sec-label").html("0"),Ce("auto-sec",0);else(o=xe["auto-hour"])&&!isNaN(o)&&o>=6&&(t=0),$("#sec-field")[0].value=t,$("#sec-label").html(t),Ce("auto-sec",t);r&&$("#sec-field").blur()}}Qe()}function Qe(){return Xe.apply(this,arguments)}function Xe(){return(Xe=q(R().mark((function e(){var t,r,o,n,a,i;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("recording"!==_e){e.next=20;break}return e.next=3,T(["recordTimeLength"]);case 3:if(t=e.sent,r=U(t,1),o=r[0],n=parseInt($("#e-min-field")[0].value),a=parseInt($("#e-hour-field")[0].value),!(n+a>0)){e.next=18;break}if(!(216e5<o+1e3*(60*a*60+60*n))){e.next=18;break}return i=216e5-o,i=Math.floor(i/1e3),a=Math.floor(i/3600),n=Math.floor((i-3600*a)/60),$(".timer-tip").html(chrome.i18n.getMessage("auto_stop_warning_tip",[a,n])),$(".timer-tip").show(),$("#comfig-edit").addClass("disable"),e.abrupt("return",!1);case 18:$("#comfig-edit").removeClass("disable"),$(".timer-tip").hide();case 20:return e.abrupt("return",!0);case 21:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(){if("recording"===_e){var e=$("#e-min-field")[0].value;$("#e-hour-field")[0].value+e>0?$("#comfig-edit").removeClass("disable"):$("#comfig-edit").addClass("disable")}}function et(){$("#auto-stop").prop("checked")?$(".menu-cell.autoStop").removeClass("hidden"):$(".menu-cell.autoStop").addClass("hidden")}function tt(){var e=parseInt($("#sec-field")[0].value),t=parseInt($("#min-field")[0].value),r=parseInt($("#hour-field")[0].value);if(!$("#auto-stop").prop("checked")||0==e&&0==t&&0==r)$(".auto-stop-tip").hide();else{var o="";r>0?(o+=r+"h",o+=t+"m",o+=e+"s"):t>0?(o+=t+"m",o+=e+"s"):o+=e+"s",$(".auto-stop-tip").html(chrome.i18n.getMessage("auto_stop_tip",o)),$(".auto-stop-tip").css("display","flex")}}function rt(){return ot.apply(this,arguments)}function ot(){return(ot=q(R().mark((function e(){var t,r,o,n,a,i,c,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["autoTimerInfo","isAutoTimerStop"]);case 2:t=e.sent,r=U(t,2),o=r[0],n=r[1],a=o.timerHour,i=o.timerMin,c=o.timerSec,s=$("#toggle-timer").find(".timer-action-icon"),!n||0===a&&0===i&&0===c?(s.hasClass("off")||s.addClass("off"),$(".auto-stop-field").hide()):(s.hasClass("off")&&s.removeClass("off"),nt());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nt(){return at.apply(this,arguments)}function at(){return(at=q(R().mark((function e(){var t,r,o,n,a,i,c;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["autoTimerInfo","isAutoTimerStop"]);case 2:t=e.sent,r=U(t,2),o=r[0],n=r[1],a=o.timerHour,i=o.timerMin,c=o.timerSec,"recording"===_e&&n&&a+i+c>0&&($(".auto-stop-field").css("display","flex"),lt());case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function it(){return(it=q(R().mark((function e(){var t,r,o,n,a,i,c,s,l,u,d,f,h,p;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["autoTimerInfo","isAutoTimerStop","recordTimeLength","startAutoStop"]);case 2:t=e.sent,r=U(t,4),o=r[0],n=r[1],a=r[2],i=r[3],c=o.timerHour,s=o.timerMin,l=o.timerSec,"recording"===_e&&(Se=!1,u=0,d=0,n&&(p=0,(f=1e3*(l+60*s+60*c*60))>=(h=a-i)&&(p=f-h),p=Math.floor(p/1e3),u=Math.floor(p/3600),d=Math.floor((p-3600*u)/60)),$("#e-min-field")[0].value=d,$("#e-min-label").html(d),$("#e-hour-field")[0].value=u,$("#e-hour-label").html(u),nt(),Ze());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ct(){return st.apply(this,arguments)}function st(){return(st=q(R().mark((function e(){var t,r,o,n,a,i,c,s,l,u,d,f,h;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["autoTimerInfo","isAutoTimerStop","recordTimeLength","startAutoStop"]);case 2:t=e.sent,r=U(t,4),o=r[0],n=r[1],a=r[2],r[3],i=o.timerHour,c=o.timerMin,s=o.timerSec,"recording"===_e&&(Se=!1,l=0,u=0,n&&(h=0,(d=1e3*(s+60*c+60*i*60))>=(f=a)&&(h=d-f+200),h=Math.floor(h/1e3),l=Math.floor(h/3600),u=Math.floor((h-3600*l)/60)),$("#e-min-field")[0].value=u,$("#e-min-label").html(u),$("#e-hour-field")[0].value=l,$("#e-hour-label").html(l),nt(),Qe());case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lt(){return ut.apply(this,arguments)}function ut(){return(ut=q(R().mark((function e(){var t,r,o,n,a,i,c,s;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["autoTimerInfo","isAutoTimerStop","autoStopTime"]);case 2:t=e.sent,r=U(t,3),o=r[0],n=r[1],a=r[2],i=o.timerHour,c=o.timerMin,s=o.timerSec,n&&1e3*(s+60*c+60*i*60)>0&&$(".auto-stop-field").find(".tips").html(chrome.i18n.getMessage("auto_timer_tip",a));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dt(e){var t=$("#recording_title");if(e)$("#recording-view").find(".recording-action").addClass("paused"),$("#recording-view").find(".time-field").addClass("paused"),t.html(chrome.i18n.getMessage("pause_title"));else{$("#recording-view").find(".recording-action");$("#recording-view").find(".recording-action").removeClass("paused"),$("#recording-view").find(".time-field").removeClass("paused"),t.html(chrome.i18n.getMessage("recording_title"))}}function ft(){return ht.apply(this,arguments)}function ht(){return(ht=q(R().mark((function e(){var t,r,o,n,a,i,c,s,l,u,d,f;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T(["cameraStream","audioStream","isShowToolbar","devicesInfo"]);case 2:t=e.sent,r=U(t,4),o=r[0],n=r[1],a=r[2],i=r[3],c=$("#toggle-camera").find(".camera-action-icon"),s=$("#toggle-mic").find(".mic-action-icon"),l=$("#toggle-ann-menu").find(".toolbar-action-icon"),u=$("#toggle-camera"),d=$("#toggle-mic"),f=$("#toggle-ann-menu"),o?(c.hasClass("nocam")&&c.removeClass("nocam"),u.attr("aria-label",chrome.i18n.getMessage("off_cam_btn"))):(c.hasClass("nocam")||c.addClass("nocam"),ye.length<1&&i.videoDevices<1?c.hasClass("red")||c.addClass("red"):c.removeClass("red"),u.attr("aria-label",chrome.i18n.getMessage("on_cam_btn"))),$("#toggle-mic").find(".mic-action-icon").removeClass("loading"),$("#toggle-camera").find(".camera-action-icon").removeClass("loading"),n?(s.hasClass("mute")&&s.removeClass("mute"),d.attr("aria-label",chrome.i18n.getMessage("off_mic_btn"))):(s.hasClass("mute")||s.addClass("mute"),we.length<1&&i.audioDevices<1?s.hasClass("red")||s.addClass("red"):s.removeClass("red"),d.attr("aria-label",chrome.i18n.getMessage("on_mic_btn"))),a?(l.removeClass("notoolbar"),f.attr("aria-label",chrome.i18n.getMessage("hide_ctl_bar"))):(l.addClass("notoolbar"),f.attr("aria-label",chrome.i18n.getMessage("show_ctl_bar")),$(".select-option-item.ann-tool-bar").addClass("disable"));case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function pt(){Ce({"save-capture-location":"local"}),ze()}function mt(e){for(var t,r=e.inputBuffer.getChannelData(0),o=r.length,n=0,a=0;a<o;a++)t=r[a],Math.abs(t)>=this.clipLevel&&(this.clipping=!0,this.lastClip=window.performance.now()),n+=t*t;var i=Math.sqrt(n/o);this.volume=Math.max(i,this.volume*this.averaging)}function vt(){$("#volume-canvas").hide(),Z&&window.cancelAnimationFrame(Z),X=null,ee&&(ee.getTracks().forEach((function(e){e.stop()})),ee=null)}function gt(){if(xe.record_mic&&ve&&!1!==$("#main-menu").is(":visible")){vt(),$("#volume-canvas").show();var e=new AudioContext,t={};xe["mic-deviceId"]&&(t.deviceId=xe["mic-deviceId"]);try{navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia,navigator.getUserMedia({audio:t},(function(t){ee=t;var r=e.createMediaStreamSource(t);X=function(e,t,r,o){var n=e.createScriptProcessor(512);return n.onaudioprocess=mt,n.clipping=!1,n.lastClip=0,n.volume=0,n.clipLevel=t||.98,n.averaging=r||.95,n.clipLag=o||750,n.connect(e.destination),n.checkClipping=function(){return!!this.clipping&&(this.lastClip+this.clipLag<window.performance.now()&&(this.clipping=!1),this.clipping)},n.shutdown=function(){this.disconnect(),this.onaudioprocess=null},n}(e),r.connect(X),wt()}),(function(e){}))}catch(e){}}}function wt(e){var t=document.getElementById("volume-canvas").getContext("2d");t.clearRect(0,0,5,18),X&&(X.checkClipping()?t.fillStyle="red":t.fillStyle="#47d892",t.fillRect(0,0,5,18*X.volume*5)),Z=window.requestAnimationFrame(wt)}function yt(){return bt.apply(this,arguments)}function bt(){return(bt=q(R().mark((function e(){var t;return R().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T("time");case 2:t=e.sent,$("#recording-view").find(".time").text(t),lt();case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $t(e){e?($("#ctl-bar-icon").show(),$("#ctl-bar-off-icon").hide(),$(".ann-bar-field.ann-tool").removeClass("disable")):($("#ctl-bar-icon").hide(),$("#ctl-bar-off-icon").show(),$(".ann-bar-field.ann-tool").addClass("disable")),$("#ctl-bar").prop("checked",e)}function kt(e){return e.match(/chrome(.*):\/\//)||e.match(/edge(.*):\/\//)||e.match(/chrome-extension:\/\//)||e.match(/https:\/\/chrome.google.com\/webstore/i)||e.match(/https:\/\/chromewebstore.google.com/i)||e.match(/https:\/\/ntp.msn.cn\/edge\/ntp/i)||e.match(/about:blank/)&&!1}$("#sidebar").css("display","block"),"true"!==localStorage.promotion_new&&$("#sidebar").find(".new-badge").show(),function(){Ee.apply(this,arguments)}()}},r={};function o(e){var n=r[e];if(void 0!==n)return n.exports;var a=r[e]={exports:{}};return t[e].call(a.exports,a,a.exports,o),a.exports}o.m=t,e=[],o.O=(t,r,n,a)=>{if(!r){var i=1/0;for(u=0;u<e.length;u++){for(var[r,n,a]=e[u],c=!0,s=0;s<r.length;s++)(!1&a||i>=a)&&Object.keys(o.O).every((e=>o.O[e](r[s])))?r.splice(s--,1):(c=!1,a<i&&(i=a));if(c){e.splice(u--,1);var l=n();void 0!==l&&(t=l)}}return t}a=a||0;for(var u=e.length;u>0&&e[u-1][2]>a;u--)e[u]=e[u-1];e[u]=[r,n,a]},o.d=(e,t)=>{for(var r in t)o.o(t,r)&&!o.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},o.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={42:0};o.O.j=t=>0===e[t];var t=(t,r)=>{var n,a,[i,c,s]=r,l=0;if(i.some((t=>0!==e[t]))){for(n in c)o.o(c,n)&&(o.m[n]=c[n]);if(s)var u=s(o)}for(t&&t(r);l<i.length;l++)a=i[l],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(u)},r=self.webpackChunkawesomescreenshot_extension=self.webpackChunkawesomescreenshot_extension||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),o.O(void 0,[437,173],(()=>o(23760)));var n=o.O(void 0,[437,173],(()=>o(51227)));n=o.O(n)})();